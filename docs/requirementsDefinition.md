# Farm Match - ファームステイマッチングアプリ

## プロジェクト概要

Farm Matchは、ファームステイ先の検索・予約から体験の記録・共有まで一元管理できるWebアプリケーションです。
農業体験を通じた新しい旅行スタイルと地域活性化を目指します。

## フェーズ1 要件定義

### 開発期間・体制
- **開発期間**: 半年（大学プロジェクト）
- **想定ユーザー数**: 小規模（100-1000ユーザー程度）
- **チーム**: 大学生チーム

### 主要機能

#### 1. ユーザー認証
- Google OAuth 2.0による認証
- 新規登録・ログイン機能

#### 2. ファームステイ検索・予約
- キーワード検索
- 都道府県別検索
- ステイ先一覧表示
- 詳細情報表示
- 予約申込み（メール通知）

#### 3. 体験記録・評価
- 5段階評価システム
- レビューコメント投稿
- 写真投稿機能

#### 4. SNS機能
- 体験投稿・共有
- いいね・コメント機能
- ユーザー間交流

### ユーザー種別と権限

#### 一般ユーザー
- ファームステイ検索・予約
- 体験投稿・評価
- SNS機能利用

#### ステイ先提供者（農家）
- 自ファーム情報の登録・編集
- 予約管理・確認
- ゲストとのやり取り

#### 管理者
- 全ユーザー・ステイ先管理
- システム全体の管理
- コンテンツ管理

### 画面構成

#### 1. ログイン画面
- Google認証ボタン
- 新規登録・ログイン統合

#### 2. ホーム画面
```
検索機能:
- キーワード検索バー
- 都道府県選択
- ステイ先一覧表示（2列カード形式）

表示項目（各カード）:
- メイン写真
- ファーム名
- 所在地
- 基本料金
```

#### 3. ステイ先詳細画面
```
詳細情報:
- 写真ギャラリー（3-5枚）
- 基本情報（料金、定員、体験内容）
- アクセス情報
- 説明文
- 予約ボタン
- レビュー表示
```

#### 4. 予約画面
```
予約情報入力:
- 滞在期間（開始日・終了日）
- 参加人数
- 連絡先情報
- 申込ボタン（メール送信）
```

#### 5. マイページ
```
個人情報:
- プロフィール表示・編集
- 予約履歴
- 投稿した体験レビュー
- 設定

農家用追加機能:
- ファーム情報管理
- 予約管理
```

#### 6. SNS画面
```
コミュニティ機能:
- 体験投稿フィード
- 写真・コメント投稿
- いいね・コメント機能
- ユーザー検索
```

### 技術構成

#### フロントエンド
```
フレームワーク: Next.js 14 (App Router)
言語: TypeScript
スタイリング: Tailwind CSS
認証: NextAuth.js (Google Provider)
```

#### バックエンド
```
フレームワーク: FastAPI
言語: Python 3.11+
ORM: SQLModel
バリデーション: Pydantic
```

#### データベース設計
```
主要テーブル:
- users (ユーザー情報)
- farms (ファーム情報)
- reservations (予約情報)
- reviews (レビュー・評価)
- posts (SNS投稿)
- comments (コメント)
```

#### インフラ構成（フェーズ1）
```
フロントエンド: Vercel
バックエンド API: Vercel Functions
データベース: Aurora DB (MySQL互換)
認証: Google OAuth 2.0
```

#### 開発環境
```
コンテナ: Docker
開発サーバー: Next.js dev server + FastAPI uvicorn
```

### データ仕様

#### ファーム情報
```
- ファーム名
- 所在地（都道府県、市区町村、住所）
- 体験内容（農業、牧場、漁業）
- 料金体系（1日/1泊/週単位）
- 定員数
- 設備情報（Wi-Fi、個室/相部屋、食事提供等）
- 写真（最大5枚）
- 説明文
- アクセス情報
```

#### 予約情報
```
- 予約ID
- ユーザーID
- ファームID
- 滞在期間（開始日・終了日）
- 参加人数
- 予約状態（申込中、承認済み、完了、キャンセル）
- 申込日時
- 連絡先情報
```

#### レビュー・評価
```
- 評価（5段階）
- コメント
- 写真（任意）
- 投稿日時
- 体験時期
```

### 運用・制約事項

#### フェーズ1での制約
- 決済機能なし（現地支払い）
- キャンセルポリシー未定義
- 本人確認機能なし
- 24時間サポートなし

#### 今後の拡張予定（フェーズ2以降）
- スタンプラリー機能
- オンライン決済
- Line/Yahoo認証
- AWS移行（API Gateway, Lambda, Amplify, Cognito, etc.）
- 高度な検索フィルター
- リアルタイム通知

### セキュリティ・プライバシー
- Google OAuth による安全な認証
- HTTPS通信の徹底
- 個人情報の適切な取り扱い
- パスワード不要（OAuth認証のみ）

### 成功指標（フェーズ1）
- 登録ユーザー数: 100名以上
- ファーム登録数: 10箇所以上
- 予約申込数: 20件以上
- SNS投稿数: 50件以上

---

## 開発スケジュール（目安）

| 期間 | フェーズ | 主要タスク |
|------|---------|-----------|
| 1-2ヶ月目 | 基盤構築 | 環境構築、認証実装、基本UI |
| 3-4ヶ月目 | 核心機能 | 検索・予約・評価機能 |
| 5-6ヶ月目 | 付加機能 | SNS機能、管理画面、テスト |

---

## ディレクトリ構成（予定）

```
farm-match/
├── frontend/           # Next.js アプリ
│   ├── src/
│   │   ├── app/        # App Router
│   │   ├── components/ # 共通コンポーネント
│   │   └── lib/        # ユーティリティ
├── backend/            # FastAPI
│   ├── app/
│   │   ├── models/     # SQLModel
│   │   ├── routers/    # API エンドポイント
│   │   └── core/       # 認証・設定
├── docker-compose.yml  # 開発環境
└── README.md          # このファイル
```

---

*最終更新: 2025年9月*